#!/bin/csh\n\n# The SubMit Project: Container Script, downloaded from DB and executed by run.sh\n# -------------------------------------------------------------------------------\n\n# Run Script Header\n# -----------------\n\nset submissionID=$1\n\n# lund file is passed as an argument to this script\n# in condor this process is automatic. Assuming in other farm it is as well\nset lundFile=$2\n\n# saving date for bookmarking purposes:\nset startDate = `date`\n\necho Running directory: `pwd`\n\nprintf 'Job submitted by: robertej'\nprintf 'Job Project: rgaDIS'\necho\nprintf 'Job Start time: '; /bin/date\nprintf 'Job is running on node: '; /bin/hostname\necho\n\necho Directory `pwd` content before starting submission $submissionID':'\nls -l\necho\n\n# End of Run Script Header\n# ------------------------\n\n\n# Generator\n# ---------\n# saving date for bookmarking purposes:\nset generatorDate = `date`\n\necho\nprintf 'Running 100 events with generator >clasdis< with options: --t 20 25'\necho\nclasdis --trig 100 --docker --t 20 25\necho\nprintf 'Events Generator Completed on: '; /bin/date\necho\necho 'Directory Content After Generator:'\nls -l\necho\n\n# End of Run Generator\n# ---------------------\n\n\n# Run GEMC\n# --------\n\n# saving date for bookmarking purposes:\nset gemcDate = `date`\n\necho\necho Running events from user lund file: $lundFile\necho Executable: `which gemc`\nif ( -f /jlab/work/clas12.gcard ) then\n\techo /jlab/work/clas12.gcard exists, copying it here\n\tcp /jlab/work/clas12.gcard job.gcard\nelse\n\trm -f job.gcard\n\techo '/jlab/work/clas12.gcard does not exist, using sqlite3 to retrieve it'\n\tmysql --defaults-extra-file=msqlconf.txt --execute='SELECT gcard_textFROM gcards WHERE gcardID = $submissionID;'  > job.gcard\n\t#sqlite3 CLAS12_OCRDB.db 'SELECT gcard_text FROM gcards WHERE gcardID = '$submissionID''  > job.gcard\nendif\n\ngemc -USE_GUI=0 -OUTPUT='evio, gemc.evio' -N=100 -INPUT_GEN_FILE='lund, sidis.dat' job.gcard\necho\nprintf 'GEMC Completed on: '; /bin/date\necho\necho 'Directory Content After GEMC:'\nls -l\necho\n\n# End of GEMC\n# -----------\n\n\n\n# Run evio2hipo\n# -------------\n\n# saving date for bookmarking purposes:\nset evio2hipoDate = `date`\n\necho\nprintf 'Running evio2hipo with torus current scale: -1.0 and solenoid current scale: -1.0'\necho\necho\necho executing: evio2hipo -r 11 -t -1.0 -s -1.0 -i gemc.evio -o gemc.hipo\nevio2hipo -r 11 -t -1.0 -s -1.0 -i gemc.evio -o gemc.hipo\necho\nprintf 'evio2hipo Completed on: '; /bin/date\necho\necho 'Directory Content After evio2hipo:'\nls -l\necho\n\n# End of evio2hipo\n# ----------------\n\n\n\n# Run Reconstruction\n# ------------------\n\n# saving date for bookmarking purposes:\nset reconstructionDate = `date`\n\necho\necho\necho executing: notsouseful-util -i gemc.hipo -o recon.hipo -c 2\nnotsouseful-util -i gemc.hipo -o recon.hipo -c 2\necho\nprintf 'notsouseful-util Completed on: '; /bin/date\necho\necho 'Directory Content After notsouseful-util:'\nls -l\necho\n\n# End of Reconstruction\n# ---------------------\n\n\n#!/bin/csh\n\n# Run Script Footer\n# -----------------\n\nset endDate = `date`\n\necho ==== SubMit-Job === Job Start: $startDate\necho ==== SubMit-Job === Generator Start: $generatorDate\necho ==== SubMit-Job === GEMC Start: $gemcDate\necho ==== SubMit-Job === evio2hipoDate Start: $evio2hipoDate\necho ==== SubMit-Job === Reconstruction Start: $reconstructionDate\necho ==== SubMit-Job === Job End: $endDate\n\n# End of Run Script Footer\n# ------------------------\n\n

